# 🎯 RISPOSTA RAPIDA: Endpoint 404

## La Tua Domanda
```
Come mai non vedo http://localhost:8000/api/v1/acquisition/websdrs
nei API gateway docs?
```

## La Risposta Breve

### ✅ L'endpoint ESISTE
```python
# In: services/rf-acquisition/src/routers/acquisition.py (line ~245)
@router.get("/websdrs", response_model=list[dict])
async def list_websdrs():
    return get_websdrs_config()  # 7 WebSDRs
```

### ❌ Non lo vedi in Swagger del Gateway
Perché è **proxied** → non è definito direttamente nel gateway

### ✅ Ma il Gateway LO PROXYA
```python
# In: services/api-gateway/src/main.py (line 79)
@app.api_route("/api/v1/acquisition/{path:path}", ...)
async def proxy_to_rf_acquisition(request, path):
    return await proxy_request(request, RF_ACQUISITION_URL)
```

### 📚 Come Vedere gli Endpoint

```
Gateway Docs:         http://localhost:8000/docs        ← Non mostra proxied
Service Docs:         http://localhost:8001/docs        ← Mostra TUTTI ✅
```

**👉 Vai a http://localhost:8001/docs per vedere `/websdrs`**

---

## Come Testare in 2 Secondi

```powershell
python test_full_stack.py
```

Se ritorna:
```
✅ All Tests Passed!
✅ API Gateway is online
✅ RF-Acquisition Service is online  
✅ /api/v1/acquisition/websdrs endpoint is accessible
```

→ **Tutto funziona! Il frontend può chiamare il backend.**

Se ritorna:
```
❌ Failed Tests
❌ Connection Error: [Errno 10061]
```

→ **I services non sono online:**
```powershell
docker-compose up -d api-gateway rf-acquisition
python test_full_stack.py  # Riprova
```

---

## Se il Test Passa ma Browser Mostra 404

### Check 1: Verification il .env
```bash
# frontend/.env deve avere:
VITE_API_URL=http://localhost:8000
# NO: http://localhost:8000/api
```

### Check 2: Hard Reload Browser
```
Ctrl+Shift+R (hard refresh)
Oppure: Ctrl+Shift+Delete (cancella cache)
```

### Check 3: Apri Console Browser (F12)
Dovresti vedere log come:
```
🔧 API Configuration: {VITE_API_URL: 'http://localhost:8000', ...}
📤 API Request: {method: 'GET', url: '/api/v1/acquisition/websdrs', ...}
```

Se NO → il frontend non has been updated

---

## Architettura in 5 Secondi

```
Browser (3001)
    ↓ GET /api/v1/acquisition/websdrs
API Gateway (8000) [proxy]
    ↓ forward to
RF-Acquisition (8001) [real service]
    ↓ response
Browser ✅ JSON con 7 WebSDRs
```

---

## Azioni Immediate

1️⃣ **Test:**
```powershell
python test_full_stack.py
```

2️⃣ **Se test fallisce:**
```powershell
docker-compose up -d
```

3️⃣ **Apri browser:**
```
http://localhost:3001/websdrs
F12 → Console → Scroll up
```

4️⃣ **Se vedi `📤 API Request` log:**
```
✅ Frontend chiama davvero il backend!
```

---

**Status**: ✅ Diagnostica completa
**Next**: Esegui `python test_full_stack.py`

